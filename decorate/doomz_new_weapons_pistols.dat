


// good one to base it off
ACTOR M19Loaded : Ammo
{
 Inventory.MaxAmount 7
 +IGNORESKILL
 Inventory.Icon "CANBA0" // This displays on the fullscreen HUD.
   Tag "Loaded .45 bullets"
}

 

ACTOR m1911 : DoomWeapon // point45acp
{
	attacksound "Weapons/pistol"
	Weapon.AmmoType1 "M19Loaded"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0 
	+noalert
	+Weapon.Ammo_Optional
	Weapon.SlotNumber 2
	Tag "M1911"
Inventory.PickupMessage  "You picked up an M1911 (uses .45 acp ammo)"
	Obituary  "%o was peppered by %k's M1911"
	States
		{
		Ready: 
			cmnt a 1   A_WeaponReady
			cmnt a 1   A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
		Deselect:
			cmnt A 1 A_Lower
			Loop
		Select:
			cmnt A 1 A_Raise
			Loop
		Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			cmnt b 3  BRIGHT A_FireBullets(5, 0, 1, random(8,9), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
			cmnt A 1  A_PlaySound("Weapons/pistol", CHAN_WEAPON)
				null a 0 A_AlertMonsters
			cmnt a 1  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			cmnt a 1 
			cmnt a 1 
			cmnt a 1 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			cmnt a 1 
			cmnt B 0 A_ReFire ("letgo")
			Goto Ready
		Reload:
			MNTE A 0 A_JumpIfInventory("M19Loaded", 6, 2) // If the gun's full, jump 2 states.
			MNTE A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,36)), "ReloadWork") //34
			cmnt A 15 A_PlaySound("newcl", CHAN_WEAPON)// Here's where that first line ends up - the gun does nothing and returns to Ready.
			Goto Ready 
		ReloadWork:
		
		
			cmnt a 10
			cmnt c 10 A_PlayWeaponSound("weapons/shotgr") // click-clack.
				null a 0 A_AlertMonsters
			cmnt d 10  A_GiveInventory("M19Loaded", 7)
			cmnt e 10
			cmnt f 10
			cmnt g 10
			cmnt h 10
			Goto Ready
		Flash:
			TNT1 A 2 bright
			Stop
		Spawn:
			PIST A -1
			Stop
   }
}









//THE FLASH IS WHAT FREEZES YOU"



ACTOR ampLoaded : Ammo
{
 Inventory.MaxAmount 10 //point22
 +IGNORESKILL
 Inventory.Icon "CANBA0" // This displays on the fullscreen HUD.
   Tag "Loaded .22 bullets"
}




   ACTOR amphibia : DoomWeapon  
{
	attacksound "Weapons/pistol"
	Weapon.AmmoType1 "ampLoaded"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0 
	+Weapon.Ammo_Optional
	Weapon.SlotNumber 2
	Tag "Amphibia"
 Inventory.PickupMessage "Picked up an Amphibia S - takes 0.22 ammo" 
 Obituary "%o was punctured by %k's Amphibia"
	States
		{
		Ready: 
			amff A 1 A_WeaponReady
			amff A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
		Deselect:
			amff A 1 A_Lower
			Loop
		Select:
			amff A 1 A_Raise
			Loop
		Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			amff b 1  BRIGHT A_FireBullets(3.5, 0, 1, random(3,7), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
			amff A 0  A_PlaySound("silenced", CHAN_WEAPON)
			amff a 2  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			
			amff a 1 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			amff a 1 
			amff a 0 A_ReFire ("letgo")
			Goto Ready
		Reload:
			PISG A 0 A_JumpIfInventory("MakLoaded", 8, 2) // If the gun's full, jump 2 states.
			TNT1 A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,33)), "ReloadWorkMak") //34
			amff A 10 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.
			Goto Ready 
		ReloadWorkMak:
			amff A 10  A_PlayWeaponSound("weapons/shotgr") // click-clack.
			amff c 10 
			amff d 10 A_GiveInventory("ampLoaded", 10)
			amff e 10 
			amff f 10

			Goto Ready
		Flash:
			TNT1 A 2 bright
			Stop
		Spawn:
			PIST A -1
			Stop
   }
}









// number 15
																					                            //magnum ammo
ACTOR MaGLoaded : Ammo
{
 Inventory.MaxAmount 6
 +IGNORESKILL
 Tag "Loaded .357 ammo"
}
																					                            //magnum
ACTOR Magnum : DoomWeapon  // takes 0.357 point357 (37)
{
 Weapon.SelectionOrder 708
 Weapon.AmmoType1 "MaGLoaded"
 Weapon.AmmoUse1 1
 Weapon.AmmoGive1 0 
 +noalert
 args 1                         //why this?
 +Weapon.Ammo_Optional
 Weapon.SlotNumber 2
 Inventory.PickupMessage "Picked up a magnum" 
 Obituary "%o was reamed by %k's magnum"
 Tag "Magnum"
	  States
	   {
	   Ready:
			crag A 1 A_WeaponReady
			crag A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
	   Deselect:
			crag A 1 A_Lower
			NULL AA 0 A_Lower //why this?
			Loop
	   Select:
			crag A 1 A_RAISE
			NULL AA 0 A_RAISE
			Loop
	   Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			NULL A 0  A_PlaySound("weapons/shotgf", CHAN_WEAPON)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
				null a 0 A_AlertMonsters
			crag B 2 Bright A_FireBullets(6.5, 0, 1, random(20,40), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			crag A 1
			crag A 2
			crag B 0 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			crag a 1 
			PISG B 0 A_ReFire ("letgo")
			Goto Ready

	   Reload:
			crag A 0 A_JumpIfInventory("MaGLoaded", 5, 2) // If the gun's full, jump 2 states. Will this actually work, as those are 0 length 
			TNT1 A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,37)), "ReloadWorkMaG")
			crag A 20 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.     Should make a click noise when you try it
			Goto Ready
	   ReloadWorkMaG:
	   
	   
	   
			crag A 1 Offset(0,35) A_PlayWeaponSound("weapons/shotgr") // click-clack.
            crag a 5
			crag c 5
			crag d 5
			crag e 5
			crag f 5
			crag g 5
			crag h 5
			TNT1 A 0 A_GiveInventory("MaGLoaded", 6)
				null a 0 A_AlertMonsters
			crag aaaaaa 1  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			TNT1 A 8 A_TakeInventory("thrfiveseven", 1) // We'll treat one 9mmAmmo as one full clip.
	
			Goto Ready
	  Flash:
			crag A 3 Bright A_Light2
			crag A 3 Bright A_Light1
			crag A 0 Bright A_Light0
			Goto LightDone
	   Spawn:
			HGUN c -1						//should this spawn a pickup item and then kill itself? - why is this sprite not showing up any more?
			Stop
	   }
}




ACTOR MakLoaded : Ammo
{
 Inventory.MaxAmount 8
 +IGNORESKILL
 Tag "Loaded .380 ammo"
}
																					                            //magnum

   ACTOR Makarov : DoomWeapon   // takes 0.380 (34)
{
	attacksound "Weapons/pistol"
	Weapon.AmmoType1 "MakLoaded"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0 
	+Weapon.Ammo_Optional
	Weapon.SlotNumber 2
	+noalert
	Tag "Makarov"
 Inventory.PickupMessage "Picked up a Makarov - takes 0.380 ammo" 
 Obituary "%o was punctured by %k's Makarov"
	States
		{
		Ready: 
			cmak A 1 A_WeaponReady
			cmak A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
		Deselect:
			cmak A 1 A_Lower
			Loop
		Select:
			cmak A 1 A_Raise
			Loop
		Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			cmak b 3  BRIGHT A_FireBullets(5.8, 0, 1, random(7,10), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
			cmak A 1  A_PlaySound("Weapons/pistol", CHAN_WEAPON)
				null a 0 A_AlertMonsters
			cmak a 1  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			
			cmak a 1 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			cmak a 1 
			cmak a 0 A_ReFire ("letgo")
			Goto Ready
		Reload:
			cmak A 0 A_JumpIfInventory("MakLoaded", 6, 2) // If the gun's full, jump 2 states.
			cmak A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,34)), "ReloadWorkMak") //34
			cmak A 15 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.
			Goto Ready 
		ReloadWorkMak:
		
			cmak A 8  A_PlayWeaponSound("weapons/shotgr") // click-clack.
				null a 0 A_AlertMonsters
			cmak c 8 
			cmak d 8 A_GiveInventory("MakLoaded", 8)
			cmak e 8 
			cmak f 8
			cmak g 8
		    cmak h 8
			
			Goto Ready
		Flash:
			TNT1 A 2 bright
			Stop
		Spawn:
			PIST A -1
			Stop
   }
}


																					                            //magnum ammo
ACTOR Derrloaded : Ammo
{
 Inventory.MaxAmount 2
 +IGNORESKILL
 Tag "Loaded .45 ammo"
}

	
ACTOR derrinhand : Ammo //
{
 Inventory.MaxAmount 6
 +IGNORESKILL
 Tag "Derringer ammo in hand"
}
	
																					                            //magnum
ACTOR Derringer : DoomWeapon  // takes 0.45 point45acp (36)
{
 Weapon.SelectionOrder 708
 Weapon.AmmoType1 "Derrloaded"
 Weapon.AmmoUse1 1
 Weapon.AmmoType2 "derrinhand"
 -noalert
 Weapon.AmmoGive1 0 
 args 1                         //why this?
 +Weapon.Ammo_Optional
Weapon.SlotNumber 2
 Inventory.PickupMessage "Picked up a Derringer" 
 Obituary "%o was reamed by %k's derringer"
 Tag "Derringer"
	  States
	   {
	   Ready:
			drng A 1 A_WeaponReady
			drng A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
	   Deselect:
			drng A 1 A_Lower
			NULL AA 0 A_Lower //why this?
			Loop
	   Select:
			drng A 1 A_RAISE
			NULL AA 0 A_RAISE
			Loop
	   Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			NULL A 0  A_PlaySound("weapons/shotgf", CHAN_WEAPON)
				null a 0 A_AlertMonsters
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
			drng B 2 Bright A_FireBullets(5.2, 0, 1, random(10,20), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			drng a 1
			drng A 2
			drng B 0 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			drng a 1 
			drng B 0 A_ReFire ("letgo")
			Goto Ready

	   Reload:
	   drng A 0 A_Jumpifinventory("derrinhand",1,"Remainingbulletreload")
	   drng A 0 A_JumpIfInventory("Derrloaded", 1, 2) // 
			drng A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,36)), "ReloadWork")
			drng A 13 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.     Should make a click noise when you try it
		
		Goto Ready
	   ReloadWork:
	   
			drng a 10 A_PlayWeaponSound("weapons/shotgr") // click-clack
				null a 0 A_AlertMonsters
			drng c 10
			drng d 10
			drng e 10	A_GiveInventory("DerrLoaded", 2)		
			drng f 10 A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			drng g 10 A_TakeInventory("thrfiveseven", 1) // We'll treat one 9mmAmmo as one full clip.
			null a 0 A_GiveInventory("derrinhand", 4)
			Goto Ready
	  
	  Remainingbulletreload:
	  
			drng a 10 A_PlayWeaponSound("weapons/shotgr") // click-clack
				null a 0 A_AlertMonsters
				null a 0 A_GiveInventory("DerrLoaded", 2)
			drng c 10
			drng d 10
			drng e 10			
			drng f 10 A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			drng g 10 A_TakeInventory("derrinhand", 2) // We'll treat one 9mmAmmo as one full clip.
			goto ready
	  
	   
	  Flash:
			RVLV A 3 Bright A_Light2
			RVLV A 3 Bright A_Light1
			RVLV A 0 Bright A_Light0
			Goto LightDone
	   Spawn:
			pist a -1						//should this spawn a pickup item and then kill itself? - why is this sprite not showing up any more?
			Stop
	   }
}



 
 
 
 
 ACTOR longhornLoaded2 : Ammo
{
  Inventory.PickupMessage "$GOTCLIP" // "Picked up a clip."
  Inventory.Amount 10
  Inventory.MaxAmount 200
  Ammo.BackpackAmount 10
  Ammo.BackpackMaxAmount 400
  Inventory.Icon "CLIPA0"
  States
  {
  Spawn:
    CLIP A -1
    Stop
  }
}
			


ACTOR longhornLoaded : Ammo  //.308   point308  //WHY IS IT FIRING TWICE! also takes wrong ammo>?
{
 Inventory.MaxAmount 1
 +IGNORESKILL
 
 Inventory.Icon "CANBA0" // This displays on the fullscreen HUD.
   Tag "loaded .308 Round"
}


ACTOR longhorninhand : Inventory { Inventory.MaxAmount 5 }
																					                            //longhorn
Actor Longhorn : Weapon
{
  Obituary "%o was reamed with %k's  Longhorn"
  +Weapon.Ammo_Optional
  Inventory.PickupMessage "You picked up a Longhorn pistol"
  Weapon.KickBack 125
  Weapon.AmmoType1 "longhornLoaded"
  Weapon.AmmoUse1 1
  Weapon.AmmoGive1 0 
  Weapon.SlotNumber 2

  +Weapon.NoAutoFire
  +noalert
  Scale 0.8
  Decal BulletChip
    Tag "Longhorn"

  States
  {
		Spawn:
			lunh A -1
			Stop
		Ready:
			lunh A 0
			lunh A 0 A_JumpIfInventory("LonghornZoom", 1, "ScopedReady")
			lunh A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
	  ScopedReady:
			ylng A 1 A_WeaponReady(1)
			Loop
	  Deselect:
			lunh A 0 A_JumpIfInventory("LonghornZoom", 1, "ScopedDeselect")
			lunh A 1 A_Lower
			Loop
	  ScopedDeselect:
			lunh A 0 A_TakeInventory("LonghornZoom", 2)
			lunh A 0 A_PlaySound("M40Rifle/Scope")
			lunh A 2 A_ZoomFactor(1.0)
			lunh A 1 A_Lower
			Goto ScopedDeselect+3
	  Select:
			lunh A 1 A_Raise
			Loop
	  Fire:
			SNPG A 0 A_JumpIfNoAmmo("Reload")
			SNPG A 0 A_JumpIfInventory("LonghornZoom", 1, "ScopedFire")
			SNPG A 0 A_AlertMonsters
			lunh b 2 A_FireBullets(3.5, 0, 1, random(40,80), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
			lunh a 1  A_SpawnItemEx (DeadrifleCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			SNPG A 0 
				null a 0 A_AlertMonsters
			SNPG A 0 A_Quake(2, 2, 0, 1)
			SNPG A 0 A_SetPitch(Pitch-0.5)
			lunh A 2 A_PlayWeaponSound("weapons/shotgf")
			lunh A 10
			

			lunh A 1 A_ReFire 
			Goto Ready
	  ScopedFire:
			SNPS A 0 A_AlertMonsters
			SNPS A 0 A_FireBullets(0, 0, 1, random(40,80), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			SNPs a 0  A_SpawnItemEx (DeadrifleCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			SNPS A 0 A_PlayWeaponSound("weapons/shotgf")
				null a 0 A_AlertMonsters
			SNPS A 0 A_Quake(2, 2, 0, 1)
			SNPS A 0 A_SetPitch(Pitch-0.5)
			SNPS A 28
			SNPS A 2 A_PlayWeaponSound("M40Rifle/Bolt1")
			SNPS A 11
			SNPS A 2 A_PlayWeaponSound("M40Rifle/Bolt2")
			SNPS A 19
			SNPS A 1 A_ReFire
			Goto Ready
	  AltFire:
			SNPS A 0 A_JumpIfInventory("LonghornZoom", 1, "ZoomOut")
			//SNPS A 0 A_JumpIfInventory("sawnmosZoom", 1, "ZoomMore")
			SNPS A 0 A_PlaySound("M40Rifle/Scope")
			SNPS A 0 A_GiveInventory("LonghornZoom", 1)
			SNPS A 2 A_ZoomFactor(4.0)
			Goto Ready
	  ZoomOut:
			SNPG A 0 A_TakeInventory("LonghornZoom", 2)
			SNPG A 0 A_PlaySound("M40Rifle/Scope")
			SNPG A 2 A_ZoomFactor(1.0)
			Goto Ready
	  ScopedReady:
			SNPS A 1 A_WeaponReady(1)
			Loop
			
	  Remainingbulletreload:
	       
	  	    lunh A 10 A_PlayWeaponSound("weapons/shotgr") // click-clack.
			lunh A 0 A_TakeInventory("longhorninhand", 1)
			lunh c 10
			lunh d 10  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			lunh e 10 A_GiveInventory("longhornLoaded", 1)
			lunh f 10
			lunh g 10
			Goto Ready
			
			
	  Reload:
	      
	        SNPS A 0 A_JumpIfInventory("longhorninhand", 1, "Remainingbulletreload")
	
	  
			SNPG A 0 A_JumpIfInventory("longhornLoaded", 1, 2) // If the gun's full, jump 2 states.
			TNT1 A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,40)), "ReloadWork")
			lunh A 20 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.
			//null a 0 A_giveInventory("user_308bulletsinhand",5)
			Goto Ready
	  ReloadWork:
			lunh A 10 A_PlayWeaponSound("weapons/shotgr") // click-clack.
				null a 0 A_AlertMonsters
			lunh c 10 A_GiveInventory("longhorninhand", 4)
			lunh d 10  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			lunh e 10 A_GiveInventory("longhornLoaded", 1)
			lunh f 10
			lunh g 10
	  /*
	 
			SNPG A 1 Offset(0,35) A_PlayWeaponSound("weapons/shotgr") // click-clack.
			SNPG A 2 Offset(0,38)
			SNPG A 2 Offset(0,44)
			SNPG A 2 Offset(0,52)
			SNPG A 2 Offset(0,62)
			SNPG A 2 Offset(0,72)
			SNPG A 2 Offset(0,82)
			SNPG A 50 A_GiveInventory("longhornLoaded", 1)
			SNPG A 2 Offset(0,82)
			SNPG A 2 Offset(0,72)
			SNPG A 2 Offset(0,62)
			SNPG A 2 Offset(0,52)
			SNPG A 2 Offset(0,44)
			SNPG A 2 Offset(0,38)
			SNPG A 2 Offset(0,35)
			SNPG A 2 Offset(0,32)
			
			*/
			Goto Ready
  }
}

ACTOR LonghornZoom : Inventory { Inventory.MaxAmount 2 }







ACTOR LugLoaded : Ammo //point9
{
 Inventory.MaxAmount 10
 +IGNORESKILL
 Tag "Loaded 9mm ammo"
}
																					                            //magnum

   ACTOR Luger : DoomWeapon   // takes point9(35) think this is red9
{
	attacksound "Weapons/pistol"
	Weapon.AmmoType1 "LugLoaded"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0 
	+noalert
	+Weapon.Ammo_Optional
	Weapon.SlotNumber 2
	scale 0.8
	Tag "Luger"
 Inventory.PickupMessage "Picked up a Luger - takes 9mm ammo" 
 Obituary "%o was punctured by %k's Luger"
	States
		{
		Ready: 
			zlug A 1 A_WeaponReady
			zLUG A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
		Deselect:
			zLUG A 1 A_Lower
			Loop
		Select:
			zlug A 1 A_Raise
			Loop
		Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			zlug b 1  BRIGHT A_FireBullets(5.6, 0, 1, random(6,9), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
				null a 0 A_AlertMonsters
			zlug b 1  A_PlaySound("Weapons/pistol", CHAN_WEAPON)
			zlug b 1  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			zlug a 1 
			zlug a 1 
			zlug a 1 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			zlug a 1 
			zlug a 0 A_ReFire ("letgo")
			Goto Ready
		Reload:
			zlug A 0 A_JumpIfInventory("LugLoaded", 8, 2) // If the gun's full, jump 2 states.
			TNT1 A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,35)), "ReloadWork")
			zlug a 15 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.
			Goto Ready 
		ReloadWork:
		    zlug c  5
			zlug d  5
			zlug e  5 A_PlayWeaponSound("weapons/shotgr")
				null a 0 A_AlertMonsters
			zlug f  5  A_GiveInventory("LugLoaded", 10)
			zlug g  5 
			zlug h  5
			
			zlug A  5 
		/*
			PISG A 1 Offset(0,35) A_PlayWeaponSound("weapons/shotgr") // click-clack.
			PISG A 1 Offset(0,38)
			PISG A 1 Offset(0,44)
			PISG A 1 Offset(0,52)
			PISG A 1 Offset(0,62)
			PISG A 1 Offset(0,72)
			PISG A 1 Offset(0,82)
			TNT1 A 0 A_GiveInventory("LugLoaded", 10)
			PISG A 1 Offset(0,82)
			PISG A 1 Offset(0,72)
			PISG A 1 Offset(0,62)
			PISG A 1 Offset(0,52)
			PISG A 1 Offset(0,44)
			PISG A 1 Offset(0,38)
			PISG A 1 Offset(0,35)
			PISG A 1 Offset(0,32)
			
			*/
			Goto Ready
		Flash:
			TNT1 A 2 bright
			Stop
		Spawn:
			xlug h -1
			Stop
   }
}


ACTOR GlockLoaded : Ammo //point9
{
 Inventory.MaxAmount 15
 +IGNORESKILL
 Tag "Loaded .380 ammo"
}
																					                            //magnum

   ACTOR Glock : DoomWeapon   // takes point9(35)
{
	attacksound "Weapons/pistol"
	Weapon.AmmoType1 "glockloaded"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 0 
	+noalert
	+Weapon.Ammo_Optional
	Weapon.SlotNumber 2
	Tag "glock"
 Inventory.PickupMessage "Picked up a glock - takes 9mm ammo" 
 Obituary "%o was punctured by %k's glock"
	States
		{
		Ready: 
			xglo A 1 A_WeaponReady
			xglo A 1 A_WeaponReady(WRF_ALLOWRELOAD)
			Loop
		Deselect:
			xglo A 1 A_Lower
			Loop
		Select:
			xglo A 1 A_Raise
			Loop
		Fire:
			NULL A 0 A_JumpIfNoAmmo("Reload")
			xglo b 1  BRIGHT A_FireBullets(5.6, 0, 1, random(7,10), "mospuff", FBF_USEAMMO|FBF_NORANDOM)
			NULL A 0 A_SpawnItemEx ("gunflash", 0, 0, 30, 0, 0, 0, 0)
			xglo b 1  A_PlaySound("Weapons/pistol", CHAN_WEAPON)
				null a 0 A_AlertMonsters
			xglo a 1  A_SpawnItemEx (DeadbulletCasing,20,3.5,32,random(0,1),random(1,2),random(0,1) )
			xglo a 1 
			xglo a 2		
			xglo a 1 A_ReFire ("letgo")
			Goto Ready		
		letgo:
			xglo A 1 
			xglo A 0 A_ReFire ("letgo")
			Goto Ready
		Reload:
			PISG A 0 A_JumpIfInventory("GlockLoaded", 14, 2) // If the gun's full, jump 2 states.
			TNT1 A 0 A_JumpIf(1 == (ACS_ExecuteWithResult(867,35)), "ReloadWork")
			xglo A 15 A_PlaySound("newcl", CHAN_WEAPON) // Here's where that first line ends up - the gun does nothing and returns to Ready.
			Goto Ready 
		ReloadWork:
			xglo C 5
			xglo D 5
			xglo E 5 A_PlayWeaponSound("weapons/shotgr")
				null a 0 A_AlertMonsters
			xglo F 5 A_GiveInventory("glockloaded", 15)
			xglo G 5
			xglo H 5 

			
			
			
		/*
			PISG A 1 Offset(0,35) A_PlayWeaponSound("weapons/shotgr") // click-clack.
			PISG A 1 Offset(0,38)
			PISG A 1 Offset(0,44)
			PISG A 1 Offset(0,52)
			PISG A 1 Offset(0,62)
			PISG A 1 Offset(0,72)
			PISG A 1 Offset(0,82)
			TNT1 A 0 A_GiveInventory("glockloaded", 15)
			PISG A 1 Offset(0,82)
			PISG A 1 Offset(0,72)
			PISG A 1 Offset(0,62)
			PISG A 1 Offset(0,52)
			PISG A 1 Offset(0,44)
			PISG A 1 Offset(0,38)
			PISG A 1 Offset(0,35)
			PISG A 1 Offset(0,32)
			*/
			Goto Ready
		Flash:
			TNT1 A 2 bright
			Stop
		Spawn:
			glvk A -1
			Stop
   }
}